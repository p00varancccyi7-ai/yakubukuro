<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QRカメラ起動テスト</title>
<script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
<h2>QRコード読み取りテスト</h2>
<div id="reader" style="width:300px;height:300px;"></div>
<p id="result">読み取り結果がここに表示されます</p>

<script>
Html5Qrcode.getCameras().then(cameras => {
    if(cameras && cameras.length){
        const cameraId = cameras[0].id;
        const html5QrCode = new Html5Qrcode("reader");
        html5QrCode.start(
            cameraId,
            { fps: 10, qrbox: 250 },
            qrCodeMessage => {
                document.getElementById('result').innerText = "読み取り結果: " + qrCodeMessage;
            },
            errorMessage => {
                // 読み取り失敗時は何もしない
            }
        );
    } else {
        document.getElementById('result').innerText = "カメラが見つかりません";
    }
}).catch(err => {
    document.getElementById('result').innerText = "カメラ起動に失敗: " + err;
});
</script>
</body>
</html>
